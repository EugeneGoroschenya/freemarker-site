<!doctype html>
<!-- Generated by FreeMarker/Docgen from DocBook -->
<html lang="en" class="page-type-section">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<title>Committer how-to - Apache FreeMarker</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:site_name" content="Apache FreeMarker">
<meta property="og:title" content="Committer how-to">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="http://freemarker.org/committer-howto.html">
<link rel="canonical" href="http://freemarker.org/committer-howto.html">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Roboto:500,700,400,300|Droid+Sans+Mono">
<link rel="stylesheet" type="text/css" href="docgen-resources/docgen.min.css">
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-55420501-1', 'auto');
ga('send', 'pageview');
</script>
</head>
<body itemscope itemtype="https://schema.org/Code">
    <meta itemprop="url" content="http://freemarker.org/">
    <meta itemprop="name" content="Apache FreeMarker">

  <!--[if lte IE 9]>
  <div style="background-color: #C00; color: #fff; padding: 12px 24px;">Please use a modern browser to view this website.</div>
  <![endif]--><div class="header-top-bg"><div class="site-width header-top"><a class="logo" href="http://freemarker.org/" role="banner">            <img itemprop="image" src="logo.png" alt="FreeMarker">
</a><ul class="tabs"><li class="current"><a href="index.html">Home</a></li><li><a href="docs/index.html">Manual</a></li><li><a class="external" href="docs/api/index.html">Java API</a></li></ul><ul class="secondary-tabs"><li><a class="tab icon-heart" href="contribute.html" title="Contribute"><span>Contribute</span></a></li><li><a class="tab icon-bug" href="https://issues.apache.org/jira/browse/FREEMARKER/" title="Report a Bug"><span>Report a Bug</span></a></li><li><a class="tab icon-download" href="freemarkerdownload.html" title="Download"><span>Download</span></a></li></ul></div></div>    <div class="main-content site-width">
      <div class="content-wrapper">
  <div id="table-of-contents-wrapper" class="col-left">
      <script>var breadcrumb = ["Apache FreeMarker","Community","Committer how-to"];</script>
      <script src="toc.js"></script>
      <script src="docgen-resources/main.min.js"></script>
  </div>
<div class="col-right"><div class="page-content"><div class="page-title"><div class="title-wrapper">
<h1 class="content-header header-section1" id="committer-howto" itemprop="headline">Committer how-to</h1>
</div></div><div class="page-menu">
<div class="page-menu-title">Page Contents</div>
<ul><li><a class="page-menu-link" href="#git-commit-policy" data-menu-target="git-commit-policy">Git commit policies</a></li><li><a class="page-menu-link" href="#merging-pull-request" data-menu-target="merging-pull-request">Merging in pull requests from GitHub</a></li><li><a class="page-menu-link" href="#close-pull-request-without-merging" data-menu-target="close-pull-request-without-merging">Closing GitHub pull requests without merging</a></li><li><a class="page-menu-link" href="#making-releases" data-menu-target="making-releases">Making releases</a></li><li><a class="page-menu-link" href="#updating-homepage" data-menu-target="updating-homepage">Updating the FreeMarker home page</a></li><li><a class="page-menu-link" href="#updating-docgen" data-menu-target="updating-docgen">Updating Docgen</a></li><li><a class="page-menu-link" href="#edit-docbook" data-menu-target="edit-docbook">Regarding editing the Manual and the Site DocBook</a></li></ul> </div><p><em>This page applies to Committers only, not to usual
      contributors.</em> A Committer is a person with extra rights who
      receives his status via invitation. You don&#39;t need to be a Committer to
      contribute, anyone can fork and send pull requests on Github; see more
      on <a href="contribute.html">the page for contributors</a>.</p>
        



<h2 class="content-header header-section2" id="git-commit-policy">Git commit policies</h2>


        <p>A Committer can commit directly into the Apache Git repository
        of FreeMarker, and so preferably doesn&#39;t use GitHub pull requests.
        (See <a href="sourcecode.html">the repositories and branches
        here</a>.)</p>

        <p>A Committer has the technical permissions to commit directly
        into the "main" branch (or branches), and (s)he is
        expected to use that wisely. Depending on the complexity of the
        feature, the number of active Committers in the time period, and
        whether the feature is expected to be discussed by the community,
        (s)he may should work in a feature branch instead. If the feature is
        finished and discussions were resolved (on some way described by
        Apache policies), it can be merged back into the "main"
        branch.</p>

        <p>All commits should have helpful comments; don&#39;t be afraid of
        writing long descriptions. If the commit is related to a Jira issue,
        the comment should start with the Jira issue identifier, like
        "FREEMARKER-16: ..."</p>
      
        



<h2 class="content-header header-section2" id="merging-pull-request">Merging in pull requests from GitHub</h2>


        <p>Pull requests from GitHub are merged in by Committers. Before
        accepting a pull request, ensure that:</p>

        <ul>
          <li>
            <p>The contributor has a CLA at Apache (see on <a href="http://people.apache.org/">http://people.apache.org/</a>)</p>
          </li>

          <li>
            <p>The contributor has used the proper branch of the project
            (it&#39;s sometimes looked over)</p>
          </li>
        </ul>

        <p>To merge the pull request:</p>

        

<div class="code-wrapper"><pre class="code-block code-default">git pull --no-ff https://github.com/apache/&lt;PROJECT&gt; refs/pull/&lt;PR_NUMBER&gt;/head</pre></div>

        <p>Where:</p>

        <ul>
          <li>
            <p><code class="inline-code"> <em class="code-color">&lt;PROJECT&gt;</em>
            </code>is usually
            <code class="inline-code">incubator-freemarker</code></p>
          </li>

          <li>
            <p><code class="inline-code"> <em class="code-color">&lt;PR_NUMBER&gt;</em>
            </code>is the pull request number that GitHub shows prominently
            after a "#"</p>
          </li>
        </ul>

        <p>The commit comment should automatically describe that it&#39;s a
        merge and if from where. After that you may also want to add a summary
        of what the merged branch does.</p>

        <p>In general, pull request merge commits should adhere to the same
        policies as if the Committer who commits directly into the Apache git
        repository.</p>

        <p>Pushing the merge commit to the ASF repo will automatically
        close the pull request on Github.</p>
      
        



<h2 class="content-header header-section2" id="close-pull-request-without-merging">Closing GitHub pull requests without merging</h2>


        

<div class="code-wrapper"><pre class="code-block code-default">git commit --allow-empty -m &quot;closes apache/&lt;PROJECT&gt;#&lt;PR_NUMBER&gt;: &lt;WHY&gt;&quot;</pre></div>

        <p>Where:</p>

        <ul>
          <li>
            <p><code class="inline-code"> <em class="code-color">&lt;PROJECT&gt;</em>
            </code>is usually
            <code class="inline-code">incubator-freemarker</code></p>
          </li>

          <li>
            <p><code class="inline-code"> <em class="code-color">&lt;PR_NUMBER&gt;</em>
            </code>is the pull request number that GitHub shows prominently
            after a "#"</p>
          </li>

          <li>
            <p><code class="inline-code"> <em class="code-color">&lt;WHY&gt;</em>
            </code>is the reason of the closing. For clarity, you may want
            to end it with "Closed PR without merging." or
            something similar.</p>
          </li>
        </ul>
      
        



<h2 class="content-header header-section2" id="making-releases">Making releases</h2>


        <p>For each release, one of the Committers plays the role of
        Release Manager. The Release Manager should follow the procedure here,
        and (s)he should update this page where (s)he has to deviate from
        it.</p>

        <p>For general info about making releases, please read <a href="http://www.apache.org/legal/release-policy#archived">http://www.apache.org/legal/release-policy</a>
        and <a href="http://incubator.apache.org/guides/releasemanagement.html">http://incubator.apache.org/guides/releasemanagement.html</a>.
        The FreeMarker-specific additions to those are:</p>

        <ul>
          <li>
            <p>Releases with non-trivial changes should have at least one
            Release Candidate (RC01) release, which is legally a normal
            release (not just a internal/developer one), and is promoted for
            at least 1 month on our web page. These are there differences to a
            final release:</p>

            <ul>
              <li>
                <p>RC-s aren&#39;t released to the Maven Central
                Repository</p>
              </li>

              <li>
                <p>RC documentation (Manual + JavaDoc) is only published
                under
                http://freemarker.org/builds/<em>X.X.X</em>-rc<em>X</em>/</p>
              </li>
            </ul>
          </li>

          <li>
            <p>The official release is provided as source code to build the
            project (src tar.gz). For the convenience of users the release is
            also accompanied by compiled binaries (bin tar.gz, which also
            contains the documentation). Both artifacts are downloadable from
            the Apache Software Foundation, as usual</p>
          </li>

          <li>
            <p>The same two artifacts should also be released (uploaded for
            download) on <a href="https://sourceforge.net/projects/freemarker/">https://sourceforge.net/projects/freemarker/</a>.
            We add a note there to the indicate that the canonical download is
            the one from Apache.</p>
          </li>

          <li>
            <p>Releases should have a usual jar artifact, an src artifact
            and javadoc artifact either in the Apache Maven staging reposotory
            (for RC-s), or in the Maven Central Repository (for
            finals).</p>
          </li>
        </ul>

        <p>The steps of making a release:</p>

        <div class="orderedlist"><ol type="1">
          <li>
            <p>Check that <code class="inline-code">version.properties</code> is up to
            date. Also that the version number in the title and version
            history of the Manual are up to date.</p>
          </li>

          <li>
            <p><code class="inline-code">ant update-deps</code></p>
          </li>

          <li>
            <p><code class="inline-code">ant dist</code></p>
          </li>

          <li>
            <p><code class="inline-code">ant rat</code>, check output</p>
          </li>

          <li>
            <p>Ensure this is up to date:
            https://dist.apache.org/repos/dist/<em>{dev,release}</em>/incubator/freemarker/KEY</p>
          </li>

          <li>
            <p>SVN commit the release files into the proper subdirectory of
            https://dist.apache.org/repos/<strong>dist</strong>/dev/incubator/freemarker. Note that
            this is "dev/", not "release/"!</p>
          </li>

          <li>
            <p>Upload to ASF Nexus staging</p>

            <div class="orderedlist"><ol type="1">
              <li>
                <p>If your Maven <code class="inline-code">settings-security.xml</code>
                is relocated to an encrypted storage (recommended), mount it,
                otherwise you will get 401 error when uploading.</p>
              </li>

              <li>
                <p><code class="inline-code">ant maven-dist</code></p>
              </li>

              <li>
                <p>Go to <a href="http://repository.apache.org/">http://repository.apache.org/</a>,
                log in, chose "Staging Repositories", find and
                click the repository just created. Check the upload files
                manually (on the "Content" tab). Then
                "Close" the repository. Press
                "Refresh" until it&#39;s successfully
                "closed".</p>
              </li>
            </ol></div>
          </li>

          <li>
            <p>Upload the release documentation under
            http://freemarker.org/builds/<em>X.X.X</em>-voting/documentation/
            (see
            https://git-wip-us.apache.org/repos/asf/incubator-freemarker-site.git,
            "asf-site" branch). The change log will be a link
            pointing to a page inside this.</p>
          </li>

          <li>
            <p>Voting on the FreeMarker developer list (the podling project
            list)</p>

            <div class="orderedlist"><ol type="1">
              <li>
                <p>Start a thread on the FreeMarker developer mailing list
                with subject "[VOTE] Release Apache FreeMarker
                <em>X.X.X</em> (incubating)". You
                should use an earlier release vote mail as a template.</p>
              </li>

              <li>
                <p>Needs at least 3 binding +1, majority win, and minimum
                72 hours (but see Apache policies)</p>
              </li>

              <li>
                <p>Post "[RESULT][VOTE]" mail to the
                FreeMarker developer list. Again, you should use an earlier
                release vote result mail as a template.</p>
              </li>

              <li>
                <p>If it was a failed vote, after fixing the issues, the
                release process restarts with a different dist.apache.org
                URL-s (add an attempt number to the directory for
                example)</p>
              </li>
            </ol></div>
          </li>

          <li>
            <p>If the voting on the the FreeMarker developer list has
            passed, start similar "[VOTE]" thread on
            general@incubator</p>

            <div class="orderedlist"><ol type="1">
              <li>
                <p>Use an earlier FreeMarker release vote mail as the
                template. Some notes:</p>

                <ul>
                  <li>
                    <p>Use your apache.org e-mail address as the
                    sender</p>
                  </li>

                  <li>
                    <p>Include short project description</p>
                  </li>

                  <li>
                    <p>Link the FreeMarker developer mailing list
                    "[RESULT][VOTE]" mail</p>
                  </li>

                  <li>
                    <p>Link artifacts. The src artifact is the release
                    that&#39;s voted upon. The bin is for convenience only.</p>
                  </li>

                  <li>
                    <p>Include and link via the Git commit
                    <em>hash</em></p>
                  </li>

                  <li>
                    <p>Link the change log (page under
                    http://freemarker.org/builds/<em>X.X.X</em>/)</p>
                  </li>

                  <li>
                    <p>Specify Maven staging coordinates</p>
                  </li>
                </ul>
              </li>

              <li>
                <p>Needs at least 3 binding +1, majority wins, at least 72
                hours has passed</p>
              </li>

              <li>
                <p>Post "[RESULT][VOTE]" to general@incubator.
                Use an earlier such mail as template. Some notes:</p>

                <ul>
                  <li>
                    <p>Use your apache.org e-mail address as the
                    sender</p>
                  </li>

                  <li>
                    <p>Include short project description</p>
                  </li>
                </ul>
              </li>

              <li>
                <p>If it was a failed vote, after fixing the issues, the
                release process restarts with a different dist.apache.org
                URL-s (add an attempt number to the directory for
                example)</p>
              </li>
            </ol></div>
          </li>

          <li>
            <p>Copy the release files over from
            https://dist.apache.org/repos/dist/<strong>dev</strong>/incubator/freemarker into the proper
            subdirectory of https://dist.apache.org/repos/dist/<strong>release</strong>/incubator/freemarker and commit
            them. (Of course get rid of any voting attempt numbers in the
            directory names.) Now they should appear under <a href="http://www.apache.org/dist/incubator/freemarker/">http://www.apache.org/dist/incubator/freemarker/</a>.</p>
          </li>

          <li>
            <p>Go to <a href="https://repository.apache.org/">https://repository.apache.org/</a>
            and find the staging repository that belongs to the voted version.
            Select it, press "Release" at the top. Now the
            repository should appear under <a href="https://repository.apache.org/content/repositories/releases/org/freemarker/">https://repository.apache.org/content/repositories/releases/org/freemarker/</a>
            Later (like hours later) it will appear in the Maven Central
            Repository too.</p>
          </li>

          <li>
            <p>Wait 24 hours so that the mirrors get synced. Check <a href="http://www.apache.org/dist/incubator/freemarker/">http://www.apache.org/dist/incubator/freemarker/</a>
            and <a href="http://archive.apache.org/dist/">http://archive.apache.org/dist/</a>.
            Check Maven Central repository too (in the case of non-RC
            releases).</p>
          </li>

          <li>
            <p>Delete the non-latest release of each maintained branch from
            http://www.apache.org/dist/incubator/freemarker/ (Old ones are
            automatically available on http://archive.apache.org/dist/)</p>
          </li>

          <li>
            <p>Tag the release on Git (see earlier tags for the tag name
            format). Be careful not to tag a commit made since the voting has
            succeeded.</p>
          </li>

          <li>
            <p>Update http://freemarker.org:</p>

            <ul>
              <li>
                <p>Add the release to the download section.</p>
              </li>

              <li>
                <p>Upload latest JavaDoc</p>
              </li>

              <li>
                <p>Update release date in the Manual, regenerate it.</p>
              </li>

              <li>
                <p>Upload the new Manual</p>
              </li>
            </ul>
          </li>

          <li>
            <p>Update other web pages:</p>

            <ul>
              <li>
                <p>Release on sourceforge.net. The README.md should note
                that it&#39;s for convenience only, and point to the official
                download page.</p>
              </li>

              <li>
                <p>Update Apache project status page:</p>

                <div class="orderedlist"><ol type="1">
                  <li>
                    <p>Update and commit:
                    https://svn.apache.org/repos/asf/incubator/public/trunk/content/projects/freemarker.xml</p>
                  </li>

                  <li>
                    <p>Republish:
                    https://cms.apache.org/incubator/publish</p>
                  </li>
                </ol></div>
              </li>

              <li>
                <p>Update <a href="https://en.wikipedia.org/wiki/FreeMarker">https://en.wikipedia.org/wiki/FreeMarker</a></p>
              </li>
            </ul>
          </li>

          <li>
            <p>Announce:</p>

            <ul>
              <li>
                <p>On the FreeMarker developer list</p>
              </li>

              <li>
                <p>On announce@apache.org (see <a href="https://lists.apache.org/list.html?announce@apache.org">https://lists.apache.org/list.html?announce@apache.org</a>
                for examples).</p>
              </li>

              <li>
                <p>On <a href="https://twitter.com/freemarker">https://twitter.com/freemarker</a></p>
              </li>

              <li>
                <p>On the old FreeMarker mailing lists: freemarker-user,
                freemarker-devel, freemarker-announce</p>
              </li>
            </ul>
          </li>
        </ol></div>
      
        



<h2 class="content-header header-section2" id="updating-homepage">Updating the FreeMarker home page</h2>


        <p>The content of the home page can be changed by committing it
        into the <code class="inline-code">asf-site</code> branch of the
        <code class="inline-code">freemarker-site</code> repository. However, you shouldn&#39;t
        directly edit the content of most HTML files there, as pretty much all
        of them are generated, and then is just manually copied over there.
        The generated pieces are:</p>

        <ul>
          <li>
            <p>The contents of the <code class="inline-code">docs/api</code> is generated
            from the <code class="inline-code">freemarker</code> project, by issuing
            <code class="inline-code">ant javadoc</code> there (not in the
            <code class="inline-code">site</code> project). So to change the content, you
            should edit the documentation comments in the java files.</p>
          </li>

          <li>
            <p>The contents of <code class="inline-code">docs/</code> is generated from
            the <code class="inline-code">freemarker</code> project, by issuing <code class="inline-code">ant
            manualFreemarkerOrg</code>. So to change the content, you
            should edit
            <code class="inline-code"><em class="code-color">&lt;freemarker-project&gt;</em>/src/manual/en_US/book.xml</code>.</p>
          </li>

          <li>
            <p>Most other content is generated from the
            <code class="inline-code">site</code> project, by issuing
            <code class="inline-code">ant</code>. So to change the content, you should edit
            <code class="inline-code"><em class="code-color">&lt;site-project&gt;</em>/src/docgen/book.xml</code>.
            To ensure that you are using the latest Docgen, you may want to
            issue <code class="inline-code">ant update-deps</code> before generating.</p>
          </li>
        </ul>

        <p>After you commit into the <code class="inline-code">asf-site</code> branch of
        the <code class="inline-code">freemarker-site</code> repository, it will
        automatically appear on the web site, with some small delay (a few
        seconds usually). If it doesn&#39;t, that&#39;s probably because of a known
        infrastructural glitch, where for too big commits this synchronization
        doesn&#39;t happen. In such case, commit some small change to trigger
        synchronization again.</p>
      
        



<h2 class="content-header header-section2" id="updating-docgen">Updating Docgen</h2>


        <p>Docgen (<code class="inline-code">freemarker-docgen</code> Git repository)
        generates HTML from a DocBook XML. It&#39;s a dependency of FreeMarker
        binary release building (as that contains the Manual in HTML format)
        and of <code class="inline-code">freemarker-site</code>.</p>

        <p>Docgen is not published to the Maven Central Repository, as it&#39;s
        only used as an internal build dependency. Currently, it&#39;s published
        manually to the internal Ivy repository of the project, which is under
        http://freemarker.org/repos/ivy/. If you modify Docgen, don&#39;t forget
        to publish there, or else the next site update or FreeMarker release
        will use an outdated version. For that:</p>

        <div class="orderedlist"><ol type="1">
          <li>
            <p><code class="inline-code">ant server-publish-last-build</code></p>
          </li>

          <li>
            <p>Upload the content of the resulting
            <code class="inline-code">build\dummy-server-ivy-repo</code> directory to
            <code class="inline-code">http://freemarker.org/repos/ivy/</code>. See how to
            update the contents of freemarker.org <a href="#updating-homepage">here...</a></p>
          </li>

          <li>
            <p>If you want to use the published version in the
            <code class="inline-code">freemarker</code> or
            <code class="inline-code">freemarker-site</code> projects, don&#39;t forget to issue
            <code class="inline-code">ant update-deps</code> there, or else they will keep
            using their local copy of the last obtained version.</p>
          </li>
        </ol></div>
      
        



<h2 class="content-header header-section2" id="edit-docbook">Regarding editing the Manual and the Site DocBook</h2>


        <p>Both the site and the Manual is generated from the XML files
        (DocBook format) by the custom Ant task defined in the
        <code class="inline-code">docgen</code> project
        (<code class="inline-code">freemarker-docgen</code> repository). That project also
        provides an XMLMind XML Editor (XXE for short) addon for editing these
        files. For more guide lines see
        <code class="inline-code">src/manual/en_US/docgen-help/editors-readme.txt</code> in
        the <code class="inline-code">freemarker</code> repository. About the same guide
        lines apply to the site DocBook as well.</p>
      </div></div>      </div>
    </div>
<div class="site-footer"><div class="site-width"><div class="footer-top"><div class="col-left sitemap"><div class="column"><h3 class="column-header">Overview</h3><ul><li><a href="index.html">What is FreeMarker?</a></li><li><a href="freemarkerdownload.html">Download</a></li><li><a href="docs/app_versions.html">Version history</a></li><li><a href="history.html">About us</a></li><li><a itemprop="license" href="docs/app_license.html">License</a></li></ul></div><div class="column"><h3 class="column-header">Handy stuff</h3><ul><li><a href="http://freemarker-online.kenshoo.com/">Try template online</a></li><li><a href="docs/dgui_template_exp.html#exp_cheatsheet">Expressions cheatsheet</a></li><li><a href="docs/ref_directive_alphaidx.html">#directives</a></li><li><a href="docs/ref_builtins_alphaidx.html">?built_ins</a></li><li><a href="docs/ref_specvar.html">.special_vars</a></li></ul></div><div class="column"><h3 class="column-header">Community</h3><ul><li><a href="https://github.com/apache/incubator-freemarker">FreeMarker on Github</a></li><li><a href="https://twitter.com/freemarker">Follow us on Twitter</a></li><li><a href="https://issues.apache.org/jira/browse/FREEMARKER/">Report a bug</a></li><li><a href="http://stackoverflow.com/questions/ask?tags=freemarker">Ask a question</a></li><li><a href="mailing-lists.html">Mailing lists</a></li></ul></div></div><div class="col-right"><ul class="social-icons"><li><a class="github" href="https://github.com/apache/incubator-freemarker">GitHub</a></li><li><a class="twitter" href="https://twitter.com/freemarker">Twitter</a></li><li><a class="stack-overflow" href="http://stackoverflow.com/questions/ask?tags=freemarker">Stack Overflow</a></li></ul><a class="xxe" href="http://www.xmlmind.com/xmleditor/" rel="nofollow" title="Edited with XMLMind XML Editor"><span>Edited with XMLMind XML Editor</span></a></div></div><div class="footer-bottom"> <p class="last-generated">
Last generated:
<time itemprop="dateModified" datetime="2017-01-23T13:33:22Z" title="Monday, January 23, 2017 1:33:22 PM GMT">2017-01-23 13:33:22 GMT</time> </p>
<p class="copyright">
© <span itemprop="copyrightYear">1999</span>–2017
<a itemtype="http://schema.org/Organization" itemprop="copyrightHolder" href="http://apache.org/">The Apache Software Foundation</a>. Apache FreeMarker, FreeMarker, Apache Incubator, Apache, the Apache FreeMarker logo are trademarks of The Apache Software Foundation. </p>
</div></div></div></body>
</html>
